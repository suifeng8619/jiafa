{%- comment -%}
  Breadcrumb Schema (JSON-LD)
  生成面包屑结构化数据，帮助搜索引擎理解页面层级
{%- endcomment -%}

{%- liquid
  assign breadcrumb_items = ''
  assign position = 1
-%}

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ shop.url }}"
    }
    {%- if request.page_type == 'product' -%}
      {%- if product.collections.size > 0 -%}
        {%- assign primary_collection = product.collections.first -%}
        ,{
          "@type": "ListItem",
          "position": 2,
          "name": {{ primary_collection.title | json }},
          "item": "{{ shop.url }}/collections/{{ primary_collection.handle }}"
        }
        ,{
          "@type": "ListItem",
          "position": 3,
          "name": {{ product.title | json }}
        }
      {%- else -%}
        ,{
          "@type": "ListItem",
          "position": 2,
          "name": {{ product.title | json }}
        }
      {%- endif -%}

    {%- elsif request.page_type == 'collection' -%}
      ,{
        "@type": "ListItem",
        "position": 2,
        "name": {{ collection.title | json }}
      }

    {%- elsif request.page_type == 'article' -%}
      {%- if blog -%}
        ,{
          "@type": "ListItem",
          "position": 2,
          "name": {{ blog.title | json }},
          "item": "{{ shop.url }}/blogs/{{ blog.handle }}"
        }
        ,{
          "@type": "ListItem",
          "position": 3,
          "name": {{ article.title | json }}
        }
      {%- endif -%}

    {%- elsif request.page_type == 'blog' -%}
      ,{
        "@type": "ListItem",
        "position": 2,
        "name": {{ blog.title | json }}
      }

    {%- elsif request.page_type == 'page' -%}
      ,{
        "@type": "ListItem",
        "position": 2,
        "name": {{ page.title | json }}
      }

    {%- elsif request.page_type == 'list-collections' -%}
      ,{
        "@type": "ListItem",
        "position": 2,
        "name": "Collections"
      }

    {%- elsif request.page_type == 'search' -%}
      ,{
        "@type": "ListItem",
        "position": 2,
        "name": "Search"
      }

    {%- elsif request.page_type == 'cart' -%}
      ,{
        "@type": "ListItem",
        "position": 2,
        "name": "Cart"
      }

    {%- endif -%}
  ]
}
</script>
